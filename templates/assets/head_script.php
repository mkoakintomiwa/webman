<script>
	function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var defaultImageUploadMaxSize=2000;var FlutterResolved;var navbarHeight=$('#navbar').height();var datepickerInstance;var timepickerInstance;$(window).on('beforeunload',function(){pp('show');setTimeout(function(){pp('hide');},30000);});$(document).on("click",function(e){var r;$('.modal button').attr('data-toggle','notice');if(closest(e,'.drop,.drop-menu')){$('.drop-menu').hide();}if(closest(e,"#notice")&& !closest(e,"#notice-content")&& !closest(e,".sticky-notice")){npClose();}if($(e.target).closest('#notice .dismiss').toArray().length>0){notice('hide');}if(closest(e,'.reload-iframe')){r=$(e.target).closest('.reload-iframe');$(r).on("click",function(){$(this).parents('.iframe-wrapper').find('iframe').attr('src',function(i,val){return val;});});}if(closest(e,"[hyperlink]")){r=closestElement(e,"[hyperlink]");window.location.href=$(r).attr('hyperlink').trim();}if(closest(e,".log-out")){r=$(e.target).closest('.log-out');window.location.href='?action=log-out';}if(closest(e,'.previous-page')){}if(closest(e,'[android-page]')){r=$(e.target).closest('[android-page]');}if(closest(e,'.spclose')){spClose();}if(closest(e,'.Spclose')){SpClose();}if(closest(e,'.mpclose')){mpClose();}if(closest(e,'.npclose')){npClose();}if(closest(e,'.reset-progress')){$.ajax({url:"".concat(ajax,"/reset-progress.php"),beforeSend:function beforeSend(){np();},success:function success(d){npClose();ajaxDone(d,function(){toast('Progress successfully reset');});}});}$('li[id^="select-options"]').on('touchend',function(e1){e1.stopPropagation();});if(closest(e,".external-link")){e.preventDefault();var element=closestElement(e,".external-link");var external_link=$(element).attr("href");var _external_link=btoa(external_link);var filename=$(element).attr("download");var _filename=encodeURIComponent(filename);var download_link="".concat(rel_dirname,"/external-files/").concat(_external_link,"/").concat(_filename);$(element).attr("download-link",download_link);$(element).siblings('.external-link-wait').html(smallFlashRoller).addClass('lower-roller');openInNewTab(download_link);}if(closest(e,".add-dialog-item .iterator")){var element=closestElement(e,".add-dialog-item .iterator");animateTo(parseHTMLElement($(element).parents('.add-dialog').find('.add-icon')),300,true);}if(closest(e,".add-dialog-item .add-dialog-remove")){var element=closestElement(e,".add-dialog-item .add-dialog-remove");$(element).parents('.add-dialog-item').element().outerHTML='';$.each($('.add-dialog-item').toArray(),function(index,elem){$(elem).find('.iterator').html(index+1+'.');});}if(closest(e,".goto-edit-admission-fields")){var element=closestElement(e,".goto-edit-admission-fields");var page_id=$(element).parents(".add-dialog-item").find(".namespace-id textarea").val();window.location.href="fields.php?page_id=".concat(page_id);}if(closest(e,".datepicker")){var element=closestElement(e,".datepicker");var format=$(element).attr("format");var yearRange=$(element).attr("year-range");initiateDatepicker(element,{format:format});datepickerInstance=M.Datepicker.getInstance(element);datepickerInstance.open();}if(closest(e,".datepicker-done,.datepicker-cancel")){datepickerInstance.destroy();}if(closest(e,".timepicker")){var element=closestElement(e,".timepicker");initiateTimepicker(element);timepickerInstance=M.Timepicker.getInstance(element);timepickerInstance.open();}if(closest(e,".timepicker-done,.timepicker-cancel")){timepickerInstance.destroy();}if(!closest(e,".search-results")){$(".search-results").html("");}});$(document).on('keypress',function(e){if(e.key=="Enter"){$(document).trigger("enter");}});$(document).ready(function(){$('.sidenav').sidenav();AOS.init();$("select").formSelect();$('.collapsible').collapsible();initIframeExtras();$(".global-search").on("click",function(){notice("<i class=\'fa fa-search\'></i> Search","\n\t\t<div style=\'padding:15px; padding-top: 0px;\'>\n\t\t\t<div class=\'input-field\'>\n\t\t\t\t<label>Name</label>\n\t\t\t\t<input type=\'text\' class=\'search-input search-for-chat-input\' oninput=\'searchDB(this,useSearchForChatResult)\' table=\'users\' field=\'preferred_name\' index-fields=\'preferred_name,staff_id,clearance\'>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\'centralize\'>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\'btn btn-primary search-for-chat\'><i class=\'fab fa-facebook-messenger\' style=\'font-size: 16px;\'></i> Chat</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t");$(".search-for-chat").on("click",function(){var uid=$(".search-for-chat-input").attr("uid");window.location.href="".concat(rel_dirname,"/users/messages/chat.php?t=").concat(uid,"#editor-container");});});$(".center-box-header").on("click",function(){window.location.href=portal_url;});});function useSearchForChatResult(element,result){$(element).val(result.name);$(element).attr("uid",result.uid);}function ajaxDone(successfulResolve,callback){if(successfulResolve.trim()==='AJAX_SUCCESSFUL'){callback();}else{notice('System Notification',successfulResolve);$('#notice').addClass('highest-z-index');}}function checkNew(){try{$.ajax({url:"".concat(rel_dirname,"/users/new.php"),success:function success(d){var newest=JSON.parse(d);if(newest.messages>messages_count_unread||newest.notifications>notifications_count_unread){new Audio("".concat(portal_url,"/assets/iphone-whatsapp-notification.mp3")).play();}messages_count_unread=newest.messages;notifications_count_unread=newest.notifications;setTimeout(function(){checkNew();},5000);},error:function error(e){checkNew();}});}catch(exception) {checkNew();}}if(user.is_online){checkNew();}$(".logout").on("click",function(){Sp("Logging out...");logout();});$.fn.rect=function(){return this[0].getBoundingClientRect();};$.fn.element=function(i){var b=typeof i!='undefined'?i:0;return this[b];};$.fn.vals=function(){return this.toArray().map(function(x){return $(x).val().toString().trim();});};$.fn.explode=function(detonator,subcontainer){var _this=this;var chunks={};this.find(detonator).parents(subcontainer).toArray().forEach(function(chunk){var __denator=$(chunk).find(detonator);var _denator=__denator.val()?__denator.val().toString():__denator.html();chunks[_denator]=chunk;});return chunks;};$.fn.implode=function(chunks,glue){this.empty();var _this=this;glue.forEach(function(glue_droplet){_this=_this.append(chunks[glue_droplet]);});return _this;};$.fn.renovate=function(buildozer,subcontainer,glue){var chunks=this.explode(buildozer,subcontainer);return this.implode(chunks,glue);};$.fn.renovateAddDialog=function(glue){return this.renovate(".namespace-id textarea",".add-dialog-item",glue);};$.fn.toHTMLFormElement=function(){var element=this.element();return element;};$.fn.validateForm=function(){return validateForm(this);};$.fn.as_string=function(){return _t(this.val());};function addDialog(container,content,param){var _options=param=== void 0?{}:param;var options=setDefaults({disable_removal:false,animate_to:true},_options);$(".add-dialog").trigger("beforeAddDialog");if(!$(container).hasClass("add-dialog-body")){$(container).addClass("add-dialog-body");}var c=$(container).find('.add-dialog-item').toArray().length;var x=c+1;$(container).append(addDialogItem(x,content));$("select").formSelect();M.updateTextFields();var $add_dialog_item=$(container).find('.add-dialog-item:last-child');if(options.disable_removal)$add_dialog_item.find(".add-dialog-remove").remove();if(options.animate_to)animateTo($add_dialog_item.element(),null,true);$(".add-dialog").trigger("afterAddDialog");}$.fn.seteNav=function(param){var n=param=== void 0?null:param;$(this).find('input').addClass('sete-input');if($(this).find('.carets').toArray().length===0){$(this).find('input').after("\n\t\t<div class=\'carets\' class=\'ml-1\'>\n\t\t\t<div class=\'caret-up\'><i class=\'fa fa-caret-up\'></i></div>\n\t\t\t<div class=\'caret-down\'><i class=\'fa fa-caret-down\'></i></div>\n\t\t</div>\n\t\t");}var caretUp=$(this).find('.caret-up');var caretDown=$(this).find('.caret-down');var seteInput=$(this).find('.sete-input');if(n===null)n='session';if(n==='session'){$(caretUp).click(function(){var si=$(seteInput).val().toString().trim();var v=si.split('/');$(seteInput).val(parseInt(v[0])+1+'/'+(parseInt(v[1])+1));});$(caretDown).click(function(){var si=$(seteInput).val().toString().trim();var v=si.split('/');$(seteInput).val(parseInt(v[0])-1+'/'+(parseInt(v[1])-1));});}};$.fn.print=function(){printByElement(this);};$.fn.formJSON=function(){return formJSON($(this).toHTMLFormElement());};$.fn.clearForm=function(){return clearForm(this);};function closest(event,elementQuerySelector){return $(event.target).closest(elementQuerySelector).toArray().length>0;}function closestElement(event,elementQuerySelector){return $(event.target).closest(elementQuerySelector)[0];}function parseHTMLElement(_i_htmlElement){var return_value;if(typeof _i_htmlElement==="string"){return_value=$(_i_htmlElement)[0];}else{return_value=_i_htmlElement[0];}return return_value;}function printByElement(element){$(element).addClass("d-print");$(element).parents().toArray().forEach(function(parent){$(parent).siblings().toArray().forEach(function(sibling){$(sibling).addClass("d-print-none");});});$(element).siblings().toArray().forEach(function(sibling){$(sibling).addClass("d-print-none");});window.print();$(".d-print-none").removeClass("d-print-none");$(".d-print").removeClass("d-print");}function Sp(param){var preloaderText=param=== void 0?null:param;if(!preloaderText)preloaderText="Please wait...";Swal.fire({title:preloaderText});Swal.enableLoading();}function formJSON(element){var object={};var formElement=element;var formData=new FormData(formElement);formData.forEach(function(value,key){object[key]=value;});return object;}function conditions_fufilled(conditions){return !conditions.includes(false);}function _t(any){var string="";try{string=any.toString();}catch(e) {}return string;}function validateForm(htmlFormElement){var illegalFields=[];$(htmlFormElement).find("input,textarea,select").toArray().forEach(function(element){if(typeof $(element).attr("required")!="undefined"&&$(element).attr("required")==="required"&&typeof $(element).val()!="undefined"&&_t($(element).val()).trim().length===0){var label=$(element).parents(".input-field").find("label").html();if(label)illegalFields.push(label);}});if(illegalFields.length>0){Swal.fire({html:"".concat(illegalFields.join(", ")," fields cannot be left empty"),icon:'warning'});}return illegalFields.length===0;}function logout(){if(Platform.is_browser()){window.location.href="".concat(rel_dirname,"/users/login.php");}else{Flutter.webview_logout(user.uid.toString()).then(function(p){window.location.href="".concat(rel_dirname,"/users/login.php");});}}function readAsDataURL(labelImageElement,file,param){var _options=param=== void 0?{}:param;var options=setDefaults({readAs:'DataURL'},_options);return new Promise(function(resolve){if(file){var reader=new FileReader();reader.onload=function(e){var result=e.target.result;if(options.readAs==="DataURL"){$(labelImageElement).attr('src',result);}resolve(result);};switch(options.readAs){case "ArrayBuffer":reader.readAsArrayBuffer(file);break;case "BinaryString":reader.readAsBinaryString(file);break;case "DataURL":reader.readAsDataURL(file);break;case "Text":reader.readAsText(file);}}});}function flashRoller(param,param1){var p=param=== void 0?'small':param,k=param1=== void 0?'':param1;return "\n\t<div class=\'preloader-wrapper ".concat(p," active\' style=\'").concat(k,"\'>\n\t\t<div class=\'spinner-layer spinner-blue\'>\n\t\t<div class=\'circle-clipper left\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'gap-patch\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'circle-clipper right\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div>\n\t\t</div>\n\n\t\t<div class=\'spinner-layer spinner-red\'>\n\t\t<div class=\'circle-clipper left\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'gap-patch\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'circle-clipper right\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div>\n\t\t</div>\n\n\t\t<div class=\'spinner-layer spinner-yellow\'>\n\t\t<div class=\'circle-clipper left\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'gap-patch\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'circle-clipper right\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div>\n\t\t</div>\n\n\t\t<div class=\'spinner-layer spinner-green\'>\n\t\t<div class=\'circle-clipper left\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'gap-patch\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div><div class=\'circle-clipper right\'>\n\t\t\t<div class=\'circle\'></div>\n\t\t</div>\n\t\t</div>\n\t</div>\n\t");}var _flashRoller=flashRoller();var smallFlashRoller=flashRoller('small');var bigFlashRoller=flashRoller('big');var noticeInterval;var noticeHead='';var noticeBody='';function notice(m,param,element){var y=param=== void 0?'':param;if(m.trim()!='hide'){$(this).attr('data-toggle','notice');}if(m.trim()==='show'){$('#notice-header').removeClass('.height-0');$('#notice').removeClass('highest-z-index');$('#notice').removeClass('display-none');$('#notice').css({display:'flex'});$('#notice-content').css({position:'unset'});if(typeof noticeInterval!='undefined'){clearInterval(noticeInterval);}$('body').addClass('overflow-hidden');$('#notice').addClass('show-notice').removeClass('hide-notice');$('#notice-content').addClass('trans-notice');}else if(m.trim()==='hide'){$('body').removeClass('overflow-hidden');$('#notice').addClass('hide-notice').removeClass('show-notice');$('#notice-content').removeClass('trans-notice');$('#notice').addClass('display-none');$('#notice-header').html('');$('#notice-body').html('');$('#notice-header').removeClass('height-0');$('#notice').removeClass('highest-z-index');}else if(m.trim()==='cache'){noticeHead=$('#notice-header').html();noticeBody=$('#notice-body').html();}else if(m.trim()==='retrieve'){notice(noticeHead,noticeBody);}else if(typeof y!='undefined'){$('#notice-header').html(m);$('#notice-body').html(y);notice('show');}}notice('hide');function np(param,element){var content=param=== void 0?'':param;if(element)$(element).attr("data-toggle","notice");notice(content,"<div style=\'display:flex;justify-content:center;align-items:center;padding:10px 100px;flex-direction:column\'>\n\t\t<div style=\'padding:10px\'>".concat(flashRoller(),"</div>\n\t\t<div class=\'lazy-loading\' style=\'max-width:200px;\'></div>\n\t</div>\n\t"));if(content.trim().length===0)$('#notice-header').addClass('height-0');$('#notice').addClass('highest-z-index');}function npClose(){notice('hide');}var tingle;var musalModal;function musal(musalOptions){var x=musalOptions;if(x==='close'){musalModal.close();}else{musalModal=new tingle.modal({footer:x.footer,stickyFooter:x.stickyFooter,closeMethods:['overlay','button','escape'],closeLabel:'Close',cssClass:['custom-class-1','custom-class-2'],onOpen:x.onOpen,onClose:x.onClose,beforeClose:x.beforeClose});var empty=function empty(){};x.footer=x.footer||false;x.stickyFooter=x.stickyFooter||false;x.onOpen=x.onOpen||empty;x.onClose=x.onClose||empty;x.beforeClose=x.beforeClose||true;x.icon=x.icon||'';x.content=x.content||'';var icon;if(x.icon==='success'){icon="\n\t\t\t<div class=\'svg-box\'>\n\t\t\t\t<svg class=\'circular green-stroke\'>\n\t\t\t\t\t<circle class=\'path\' cx=\'75\' cy=\'75\' r=\'50\' fill=\'none\' stroke-width=\'5\' stroke-miterlimit=\'10\'/>\n\t\t\t\t</svg>\n\t\t\t\t<svg class=\'checkmark green-stroke\'>\n\t\t\t\t\t<g transform=\'matrix(0.79961,8.65821e-32,8.39584e-32,0.79961,-489.57,-205.679)\'>\n\t\t\t\t\t\t<path class=\'checkmark__check\' fill=\'none\' d=\'M616.306,283.025L634.087,300.805L673.361,261.53\'/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t";}else if(x.icon==='error'){icon="\n\t\t\t<div class=\'svg-box\'>\n\t\t\t\t<svg class=\'circular red-stroke\'>\n\t\t\t\t\t<circle class=\'path\' cx=\'75\' cy=\'75\' r=\'50\' fill=\'none\' stroke-width=\'5\' stroke-miterlimit=\'10\'/>\n\t\t\t\t</svg>\n\t\t\t\t<svg class=\'cross red-stroke\'>\n\t\t\t\t\t<g transform=\'matrix(0.79961,8.65821e-32,8.39584e-32,0.79961,-502.652,-204.518)\'>\n\t\t\t\t\t\t<path class=\'first-line\' d=\'M634.087,300.805L673.361,261.53\' fill=\'none\'/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g transform=\'matrix(-1.28587e-16,-0.79961,0.79961,-1.28587e-16,-204.752,543.031)\'>\n\t\t\t\t\t\t<path class=\'second-line\' d=\'M634.087,300.805L673.361,261.53\'/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t";}else if(x.icon==='warning'){icon="\n\t\t\t<div class=\'svg-box\'>\n\t\t\t\t<svg class=\'circular yellow-stroke\'>\n\t\t\t\t\t<circle class=\'path\' cx=\'75\' cy=\'75\' r=\'50\' fill=\'none\' stroke-width=\'5\' stroke-miterlimit=\'10\'/>\n\t\t\t\t</svg>\n\t\t\t\t<svg class=\'alert-sign yellow-stroke\'>\n\t\t\t\t\t<g transform=\'matrix(1,0,0,1,-615.516,-257.346)\'>\n\t\t\t\t\t\t<g transform=\'matrix(0.56541,-0.56541,0.56541,0.56541,93.7153,495.69)\'>\n\t\t\t\t\t\t\t<path class=\'line\' d=\'M634.087,300.805L673.361,261.53\' fill=\'none\'/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g transform=\'matrix(2.27612,-2.46519e-32,0,2.27612,-792.339,-404.147)\'>\n\t\t\t\t\t\t\t<circle class=\'dot\' cx=\'621.52\' cy=\'316.126\' r=\'1.318\' />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t";}else{icon='';}musalModal.setContent("\n\t\t\t".concat(icon,"\n\t\t\t").concat(x.content,"\n\t\t"));musalModal.open();if(x.icon.trim()!=''){$('.svg-box').siblings().css({textAlign:'center'});$('.tingle-modal-box__content').css('padding-top','1rem');}}}function escapeOverlay(){$('#search-results').html('');notice('hide');npClose();spClose();mpClose();SpClose();}function mp(param){var m=param=== void 0?'':param;musal({content:"\n\t\t".concat(m.trim().length>0?"<div style=\'text-align:center;margin-bottom:2px\'>".concat(m,"</div>"):'',"\n\t\t<div style=\'display:flex;justify-content:center;align-items:center;padding:20px 120px;\'>\n\t\t\t").concat(flashRoller(),"\n\t\t</div>\n\t\t")});}function mpClose(){if(typeof musalModal!='undefined')musal('close');}function sp(param){var m=param=== void 0?'':param;swal({content:div("\n\t\t".concat(m.trim().length>0?"<div style=\'text-align:center;margin-bottom:2px\'>".concat(m,"</div>"):'',"\n\t\t<div style=\'display:flex;justify-content:center;align-items:center;padding:20px 120px;\'>\n\t\t\t").concat(flashRoller(),"\n\t\t</div>\n\t\t")),button:false});}function spClose(){try{swal.close();}catch(e) {}}function SpClose(){try{Swal.close();}catch(e) {}}function animateCSS(elementSelector,animationName,callback){var node=document.querySelector(elementSelector);node.classList.add('animated',animationName);function handleAnimationEnd(){node.classList.remove('animated',animationName);node.removeEventListener('animationend',handleAnimationEnd);if(typeof callback==='function')callback();}node.addEventListener('animationend',handleAnimationEnd);}function animateNotice(param){var animationName=param=== void 0?'bounceInDown':param;animateCSS('#notice-content',animationName);}function queryString(param,param1){var parameter=param=== void 0?null:param,url=param1=== void 0?null:param1;if(!url)url=window.location.href;var _query_string=rawQueryString(url);var __=_;var two=2;var parsed_query_string=_.chain(_query_string).replace('?','').split('&').map(_.partial(_.split,__,'=',two)).fromPairs().value();var _return;if(parameter){_return=parsed_query_string[parameter];}else{_return=parsed_query_string;}return _return;}function rawQueryString(param){var url=param=== void 0?null:param;if(!url)url=window.location.href;return url.split("?")[1];}function openInNewTab(url){if(!Platform.is_browser()){window.location.href=url;}else{var win=window.open(url);win.focus();}}function basename(path){var base=new String(path).substring(path.lastIndexOf('/')+1);if(base.lastIndexOf(".")!= -1){base=base.substring(0,base.lastIndexOf("."));}return base;}function file_extension(path){return path.split('.').pop();}function download_link(link,param){var filename=param=== void 0?null:param;if(!filename)filename=this.basename(decodeURIComponent(link));var downloadLink;downloadLink=document.createElement('a');downloadLink.download=filename;downloadLink.href=link;downloadLink.style.display='none';document.body.appendChild(downloadLink);downloadLink.click();$(downloadLink).remove();}function iframe_media(){$('.ql-off-editor iframe').toArray().forEach((function(iframe){var link=$(iframe).attr("src");var file_extension1;if(link.indexOf("youtu")!= -1){file_extension1="mp4";}else if(link.indexOf("vocaroo")!= -1){file_extension1="mp3";}else{link=this.queryString("url",link);file_extension1=this.file_extension(link);}$(iframe).before("\n\t\t<div style=\'margin-bottom:5px;\'>\n\t\t\t<a class=\'external-link btn btn-primary\' href=\"".concat(link,"\" download=\"").concat(document.title,".").concat(file_extension1,"\">Download</a>\n\t\t</div>\n\t\t"));}).bind(this));}function ays(aysTitle,aysContent,clickedElement,aysCallback){notice(aysTitle,"\n\t<div style=\'display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:10px;\'>\n\t\t<div style=\'margin-bottom:15px; padding-left: 30px; padding-right: 30px; \'>".concat(aysContent,"</div>\n\t\t<div style=\'display:flex;justify-content:center;align-items:center;margin-bottom:20px;\'>\n\t\t\t<button id=\'yes-ays\' style=\'margin-right:25px;\' class=\'btn btn-danger\' data-toggle=\'notice\'>Proceed</button>\n\t\t\t<button id=\'no-ays\' class=\'btn btn-primary\'>Cancel</button>\n\t\t\t<b>\n\t\t</div>\n\t</div>\n\t"),clickedElement);animateCSS('#notice-content','bounceInDown');$('#yes-ays').on("click",function(){aysCallback();});$('#no-ays').on("click",function(){notice('hide');});}function div(d){var g=document.createElement('div');g.innerHTML=d;return g;}function fileType(inputFileElement){return inputFileElement.files[0].type.split('/')[1].trim();}function setDefault(parmaeter,value){return typeof parmaeter!='undefined'?parmaeter:value;}function setDefaults(defaults,param){var options=param=== void 0?{}:param;$.each(defaults,function(property,value){if(typeof options[property]==='undefined')options[property]=value;});return options;}function checkImageForUpload(elem,foo,param){var _options=param=== void 0?{}:param;var options=setDefaults({maxSize:defaultImageUploadMaxSize},_options);var imageType=elem.files[0].type.split('/')[1].trim();if(elem.files[0].type.split('/')[0].trim()==='image'&&(imageType==='jpeg'||imageType==='png'||imageType==='jpg'||imageType==='gif')&&elem.files[0].size/1000<options.maxSize){foo({status:'valid'});}else{foo({status:'invalid'});var nb;if(!(elem.files[0].type.split('/')[0].trim()==='image'&&(imageType==='jpeg'||imageType==='png'||imageType==='jpg'||imageType==='gif'))){nb='This is not an image, please upload a valid image';}else if(!(elem.files[0].size/1000<options.maxSize)){nb="\n\t\t\t<div style=\'max-height:70vh;overflow-y:auto;\'>\n\t\t\t\t<div style=\'margin-bottom:20px\'>The size of the image should not be more than ".concat(options.maxSize,"KB, please choose another image or compress your image below</div> \n\t\t\t\t<iframe src=\'https://compressjpeg.com/#format-wrapper\' frameborder=\'0\' style=\'height:400px;width:100%\'></iframe>\n\t\t\t</div>\n\t\t\t");}else{nb='This file is not valid for upload, please choose another image';}var contentDiv=div(nb);var swal2Options={html:contentDiv};swal2Options['showConfirmButton']=false;if($(contentDiv).find('iframe').length===0){swal2Options['icon']="error";}Swal.fire(swal2Options);$(elem).val(null);}}var chooseFile=function(){"use strict";function chooseFile(){_classCallCheck(this,chooseFile);}_createClass(chooseFile,null,[{key:"image",value:function image(inputElement,param){var _options=param=== void 0?{}:param;var options=setDefaults({maxSize:defaultImageUploadMaxSize,label_image_element:$(inputElement).parents('.file-upload').find('label img').element()},_options);return new Promise(function(resolve){checkImageForUpload(inputElement,function(checkedImage){if(checkedImage.status==="valid"){readAsDataURL(options.label_image_element,inputElement.files[0]).then(function(data){resolve(data);});}else{resolve(false);}},options);});}}]);return chooseFile;}();function uploadFile(formElement,param){var _options=param=== void 0?{}:param;var options=setDefaults({'data':{}},_options);var formData=new FormData(formElement);$.each(options.data,function(key,value){formData.append(key,value);});return new Promise(function(resolve){$.ajax({url:"".concat(rel_dirname,"/api/upload-files.php"),beforeSend:function beforeSend(){sp();},data:formData,processData:false,contentType:false,method:'post',success:function success(d){resolve(d);},error:function error(e){console.log(e);}});});}function initiateDatepicker(param,param1){var element=param=== void 0?null:param,_options=param1=== void 0?{}:param1;if(!element)element=document.querySelectorAll('.datepicker');var n=new Date().getFullYear();var options=setDefaults({format:'mmmm d, yyyy',yearRange:[n-150,n+50],setDefaultDate:true,container:document.body,showDaysInNextAndPreviousMonths:true},_options);return M.Datepicker.init(element,{format:options.format,yearRange:options.yearRange,container:document.body,setDefaultDate:options.setDefaultDate,showDaysInNextAndPreviousMonths:options.showDaysInNextAndPreviousMonths,onDraw:function(){$(".datepicker-table-wrapper").css({"padding-right":"5px"});$(".datepicker-controls").css({"margin-top":"10px"});var selectElements=$(".selects-container").find("select");selectElements.addClass("browser-default");selectElements.wrap("<div></div>");selectElements.parent().css({"border":"1px green solid","margin-right":"20px"});$(".selects-container").find("input").addClass("display-none");}});}function initiateTimepicker(param){var element=param=== void 0?null:param;if(!element)element=document.querySelectorAll('.timepicker');return M.Timepicker.init(element,{container:'body'});}function match(pattern,haystack){var regex=new RegExp(pattern,"g");var matches=[];var match_result=haystack.match(regex);for(var index in match_result){var item=match_result[index];matches[index]=item.match(new RegExp(pattern));}return matches;}function clearForm(formElement){$(formElement).find("input,textarea,select").val("");$(".file-upload").find("img").attr("src",image_icon);M.updateTextFields();M.textareaAutoResize($("textarea"));try{setEditorContent('');}catch(e) {}}var Flutter=function(){"use strict";function Flutter(){_classCallCheck(this,Flutter);}_createClass(Flutter,null,[{key:"resolve",value:function resolve(message_context,resolved_value){FlutterResolved=resolved_value;$(document).trigger(message_context);}},{key:"webview_login",value:function webview_login(uid){return new Promise(function(resolve){FlutterMessenger.postMessage("{\n\t\t\t\t\"event\":\"login\",\n\t\t\t\t\"args\":[\"".concat(uid,"\"]\n\t\t\t}"));$(document).on("login",function(){resolve(FlutterResolved);});});}},{key:"webview_logout",value:function webview_logout(uid){return new Promise(function(resolve){FlutterMessenger.postMessage("{\n\t\t\t\t\"event\":\"logout\",\n\t\t\t\t\"args\":[\"".concat(uid,"\"]\n\t\t\t}"));$(document).on("logout",function(){resolve(FlutterResolved);});});}}]);return Flutter;}();var Device=function(){"use strict";function Device(){_classCallCheck(this,Device);}_createClass(Device,null,[{key:"is_mobile",value:function is_mobile(){var check=false;var _window=window;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||_window.opera);return check;}},{key:"is_computer",value:function is_computer(){return !this.is_mobile();}},{key:"width",value:function width(){return $(window).width();}},{key:"orientation",value:function orientation(){var width=this.width();var d;if(width<768){d='s';}else if(width<992){d='m';}else if(width<1200){d='l';}else{d='xl';}return d;}}]);return Device;}();var Platform=function(){"use strict";function Platform(){_classCallCheck(this,Platform);}_createClass(Platform,null,[{key:"is_browser",value:function is_browser(){return typeof operatingSystem==="undefined";}}]);return Platform;}();function icon(name,param){var attributes=param=== void 0?'':param;return "<img src=\'".concat(icons_rel_dir,"/").concat(name,"\' ").concat(attributes,">");}function copyToClipboard(_this){var el=document.createElement('textarea');var str=document.querySelector($(_this).attr('target')).innerHTML;el.value=str;el.setAttribute('readonly','');el.style={position:'absolute',left:'-9999px'};document.body.appendChild(el);el.select();document.execCommand('copy');document.body.removeChild(el);M.toast({html:'copied to clipboard'});}var clipboard=function(){"use strict";function clipboard(){_classCallCheck(this,clipboard);}_createClass(clipboard,null,[{key:"content",value:function content(){return !clipboard.isEmpty()?localStorage.getItem('clipboard'):'';}},{key:"copy",value:function copy(_this){var copiedHTML=document.querySelector($(_this).attr('target')).innerHTML;localStorage.setItem('clipboard',copiedHTML);M.toast({html:'copied to clipboard'});}},{key:"paste",value:function paste(_this){var target=$(_this).attr('target');if(target==='editor'){insertToEditor(clipboard.content());}else{document.querySelector(target).innerHTML=clipboard.content();}$('.paste-element').hide();clipboard.clear();}},{key:"isEmpty",value:function isEmpty(){return localStorage.getItem('clipboard')===null||localStorage.getItem('clipboard').trim().length===0;}},{key:"clear",value:function clear(){localStorage.setItem('clipboard','');}}]);return clipboard;}();function youtubeVideoID(url){var regExp=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;var match1=url.match(regExp);return match1&&match1[2].length===11?match1[2]:null;}function youtubeEmbedURL(url){return "https://youtube.com/embed/".concat(youtubeVideoID(url));}var editor;var mathEditor;var editorContent;var editorAutoSaveInterval;var editorSaveRequest=null;function adjustEditor(){$('#editor iframe').toArray().forEach(function(iframe){var iframe_link=$(iframe).attr('src');var q=function q(name){return queryString(name,iframe_link);};if($(iframe).attr('src').indexOf('vocaroo.com')!= -1){$(iframe).removeClass('ql-video').addClass('ql-audio');}if(q("fullscreen")==="true"){$(iframe).addClass('fullscreen-attachment');}});$('#editor img').toArray().forEach(function(img){if($(img).attr('src').indexOf('/portal/assets/images/c-correct.png')!= -1){$(img).addClass('correct-mark');}if($(img).attr('src').indexOf('/portal/assets/images/c-wrong.png')!= -1){$(img).addClass('wrong-mark');}});$('select').formSelect();}function enterEditorGateway(content){$('#editor-gateway').after("\n\t\t<span>&nbsp; &bull; &nbsp;</span>\n\t\t".concat(content,"\n\t"));}function documentAttachment(_options){var options=setDefaults({},_options);swal({content:div("\n\t\t<form id=\'editor-attachment\' method=\'post\' enctype=\'multipart/form-data\' style=\'padding:20px 50px;padding-bottom:0\'>\n\t\t\t<div>\n\t\t\t\t<h5 class=\'text-center ms-header-font\' style=\'margin-bottom:30px;font-weight:600\'>".concat(options.title," (").concat(options.accept,")</h5>\n\t\t\t</div>\n\t\t\t\n\t\t\t<!--<p>\n\t\t\t\t<label>\n\t\t\t\t\t<input id=\'fullscreen-attachment-check\' type=\"checkbox\" class=\"filled-in\"/>\n\t\t\t\t\t<span>Fullscreen attachment</span>\n\t\t\t\t</label>\n\t\t\t</p>-->\n\t\t\t\n\t\t\t<div class=\'file-field input-field\'>\n\t\t\t\t<div class=\'btn btn-secondary centralize\'>\n\t\t\t\t\t<span>File</span>\n\t\t\t\t\t<input id=\'file-1\' type=\'file\' name=\'attach_file\' accept=\'").concat(options.accept,"\'>\n\t\t\t\t</div>\n\t\t\t\t<div class=\'file-path-wrapper\'>\n\t\t\t\t\t<input class=\'file-path validate\' type=\'text\' style=\'width:300px;max-width:80vw\'>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\n\t\t<div class=\'centralize\' style=\'padding:20px;padding-top:0\'>\n\t\t\t<button id=\'upload-attachment\' class=\'btn btn-primary\'>Attach</button>\n\t\t</div>\n\t\t")),button:false});var fullscreenAttachment="";$('#upload-attachment').click(function(){if($('#fullscreen-attachment-check').prop("checked")){fullscreenAttachment="?fullscreen=true";}uploadFile($('#editor-attachment').element(),{data:{context:'attachments'}}).then(function(data){var value=Object.values(JSON.parse(data))[0];var iframe_link;if(options.accept.indexOf(".html")!= -1){iframe_link=value;}else{iframe_link="https://docs.google.com/viewer?embedded=true&url=".concat(value);}insertToEditor("\n\t\t\t<div class=\'ql-video\'>\n\t\t\t\t<iframe src=\"".concat(iframe_link).concat(fullscreenAttachment,"\" frameborder=\"no\" style=\"width:100%;height:160px\"></iframe>\n\t\t\t</div>\n\t\t\t"));adjustEditor();swal.close();Swal.close();});});}function initiateEditor(){editor=new Quill('#editor',{modules:{toolbar:{container:[[{'font':[]},{'size':[]}],['bold','italic','underline'],[{'color':["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"]},{'background':["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"]}],[{'script':'sub'},{'script':'super'}],[{'header':'1'},{'header':'2'}],[{'list':'ordered'},{'list':'bullet'},{'indent':'-1'},{'indent':'+1'}],['direction',{'align':[]}],['calculator','attachment'],['correctMark','wrongMark'],],handlers:{correctMark:function correctMark(){insertToEditor(correct_mark);adjustEditor();},wrongMark:function wrongMark(){insertToEditor(wrong_mark);adjustEditor();},attachment:function attachment(){var thisQuill=this;Swal.fire({html:"\n\t\t\t\t\t\t\t<div class=\'attachment-icons\'>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'image\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t".concat(icon('image.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Image</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'video\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('video.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Video</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'audio\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('audio.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Audio</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'word\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('word.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Word</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'pdf\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('pdf.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>PDF</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'excel\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('excel.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Excel</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'powerpoint\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('powerpoint.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>Powerpoint</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'html\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('html.png'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>HTML</div>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t\t<div attachment-name=\'latex\'>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t").concat(icon('latex.jpg'),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'label\'>LaTex</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"),showConfirmButton:false});$('.attachment-icons > div').click(function(){var attachment_name=$(this).attr('attachment-name');var range=thisQuill.quill.getSelection();if(attachment_name==='image'){swal({content:div("\n\t\t\t\t\t\t\t\t\t<form id=\'editor-attachment\' method=\'post\' enctype=\'multipart/form-data\' style=\'padding:20px 50px;padding-bottom:10px\'>\n\t\t\t\t\t\t\t\t\t\t<textarea type=\'hidden\' name=\'attachment_post\'></textarea>\n\t\t\t\t\t\t\t\t\t\t".concat(upload_file_markup,"\n\t\t\t\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t\t\t\t<div class=\'centralize\' style=\'padding:20px;\'>\n\t\t\t\t\t\t\t\t\t\t<button id=\'upload-image-attachment\' class=\'btn btn-primary\'>Attach</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t")),button:false});$('#file-1').change(function(){var _this=this;chooseFile.image(_this,{maxSize:2000}).then(function(data){});});$('#upload-image-attachment').click(function(){uploadFile($('#editor-attachment').element(),{data:{context:'attachments'}}).then(function(data){var value=Object.values(JSON.parse(data))[0];swal.close();Swal.close();thisQuill.quill.insertEmbed(range?range.index:0,'image',value,Quill.sources.USER);});});}else if(attachment_name==="video"){swal({content:div("\n\t\t\t\t\t\t\t\t\t<div style=\'padding-bottom:30px;\'>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<h5 class=\'text-center ms-header-font\' style=\'margin-bottom:30px;\'>Attach video</h5>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\'input-field\'>\n\t\t\t\t\t\t\t\t\t\t\t<label>Paste youtube video link here</label>\n\t\t\t\t\t\t\t\t\t\t\t<textarea id=\'video-link\' class=\'materialize-textarea\' style=\'width:350px;max-width:80vw\'></textarea>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\'centralize mt-2\'>\n\t\t\t\t\t\t\t\t\t\t\t<button id=\'upload-video\' class=\'btn btn-primary\'>Attach</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t"),button:false});M.updateTextFields;$('#upload-video').click(function(){insertToEditor("\n\t\t\t\t\t\t\t\t\t<div class=\'ql-video\'>\n\t\t\t\t\t\t\t\t\t\t<iframe src=\"".concat(youtubeEmbedURL($('#video-link').val().toString().trim()),"\" frameborder=\"0\" allowfullscreen></iframe>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t"));adjustEditor();swal.close();Swal.close();});}else if(attachment_name==='audio'){swal({content:div("\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<iframe src=\'https://vocaroo.com/upload\' frameborder=\'0\' style=\'height:400px;width:100%\'></iframe>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<label>Enter Audio URL</label>\n\t\t\t\t\t\t\t\t\t\t\t<input id=\'quill-audio-url\' type=\'text\'>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\'centralize mt-2\'>\n\t\t\t\t\t\t\t\t\t\t\t<button id=\'upload-audio\' class=\'btn btn-primary\'>Attach</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t"),button:false});$('#upload-audio').click(function(){insertToEditor("<iframe src=\"".concat($('#quill-audio-url').val().toString().replace(/https:\/\/voca\.ro\/(.+?)/,"https://vocaroo.com/embed/$1"),"\" frameborder=\"0\"></iframe>"));adjustEditor();swal.close();Swal.close();});}else if(attachment_name==='word'){documentAttachment({title:'Upload word document',accept:'.doc,.docx'});}else if(attachment_name==="pdf"){documentAttachment({title:'Upload PDF document',accept:'.pdf'});}else if(attachment_name==="excel"){documentAttachment({title:'Upload Excel document',accept:'.xlsx,.csv'});}else if(attachment_name==="powerpoint"){documentAttachment({title:'Upload powerpoint document',accept:'.pptx'});}else if(attachment_name==="html"){documentAttachment({title:'Upload HTML document',accept:'.html,.htm'});}});}}}},theme:'snow'});$('.ql-toolbar select').addClass("browser-default");$('.ql-audio').html(icon('audio.svg'));$('.ql-correctMark').html(correct_mark);$('.ql-wrongMark').html(wrong_mark);$('.ql-attachment').html("<i class=\'fa fa-paperclip\'></i>");$('.ql-calculator').addClass('calculator').html("<i class=\'fa fa-calculator\'></i>");adjustEditor();}function saveContent(context,content){return new Promise(function(resolve){$.ajax({url:"".concat(ajax,"/save-contents.php"),method:'post',data:{context:context,content:content},success:function success(d){resolve(d);},error:function error(e){resolve(e);}});});}function setEditorContent(HTMLString){var delta=editor.clipboard.convert(HTMLString);editor.setContents(delta);}function saveEditorContent(param){var options=param=== void 0?{}:param;var autoSaved=typeof options!='undefined'&&typeof options.autoSave!='undefined'&&options.autoSave===true;return new Promise(function(resolve){if(editor.root.innerText.trim().length>0|| !autoSaved){$.ajax({url:"".concat(ajax,"/save-contents.php"),method:'post',beforeSend:function beforeSend(){if(!autoSaved){$('#editor-saved').show().html(smallFlashRoller);}},data:{context:$('#editor').attr('context'),content:editor.root.innerHTML},success:function success(d){if(autoSaved){editorAutoSaveInterval=setTimeout(function(){saveEditorContent(options);},10000);}if(d.trim()==='done'){$('#editor-saved').show().html('Saved');$('#editor-saved').fadeOut(2000);}else{console.log(d);}resolve();},error:function(e){console.log(e);}});}else{if(autoSaved){setTimeout(function(){saveEditorContent(options);resolve();},5000);}else{resolve();}}});}function insertToEditor(HTMLString){editor.focus();var range=editor.getSelection();editor.clipboard.dangerouslyPasteHTML(range.index,HTMLString,'silent');}function editorActionPanel(title,param){var options=param=== void 0?{}:param;var popup=setDefault(options.popup,true);return "\n\t<div style=\'display:flex;justify-content:space-between;\'>\n\t\t<div>\n\t\t\t\n\t\t\t".concat(popup?"<span>".concat(title,"</span>\n\t\t\t<span>&nbsp; &bull; &nbsp;</span>"):'',"\n\t\t\t\n\t\t\t<span id=\'edit-math\' role=\'link\'>Edit math</span>\n\t\t\t<span id=\'editor-gateway\'></span>\n\t\t\t\n\t\t\t").concat(popup?"<span>&nbsp; &bull; &nbsp;</span>\n\t\t\t<span class=\'dismiss\' style=\'display:unset\'>Close</span>":'',"\n\n\t\t</div> \n\t\t<div style=\'width:50px;display: flex; align-items: center; justify-content: flex-end;\'>\n\t\t\t<span id=\'editor-saved\' class=\'float-right\'></span>\n\t\t</div>\n\t</div>\n\t");}function standardEditor(context,title,param){var _options=param=== void 0?{}:param;var options=setDefaults({popup:false,showPreloader:true,getSavedContent:true,onClose:function onClose(){}},_options);var popup=options.popup;var showPreloader=options.showPreloader;var getSavedContent=options.getSavedContent;var editorContent1;return new Promise(function(mainResolve){new Promise(function(resolve){if(popup){notice(editorActionPanel(title),"\n\t\t\t\t\t<div id=\'editor\' context=\'".concat(context,"\'></div>\n\t\t\t\t"));$("#editor").parents("#notice").addClass("sticky-notice");animateNotice();$('#notice').addClass('highest-z-index');}else{$('#editor-action-panel').html(editorActionPanel(title,options));}$('#edit-math').on("click",function(){swal({content:div("\n\t\t\t\t\t\t<div id=\'math-editor-container\'>    \n\t\t\t\t\t\t\t<div id=\'math-editor\'></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"),closeOnClickOutside:false}).then(function(){var initial_mathml_format=encodeURIComponent(mathEditor.getMathML());insertToEditor("\n\t\t\t\t\t<img alt=\'loading equation...\' src=\'http://www.wiris.net/demo/editor/render.png?mml=".concat(initial_mathml_format,"\'>\n\t\t\t\t\t"));});mathEditor=com.wiris.jsEditor.JsEditor.newInstance({'language':'en'});mathEditor.insertInto(document.getElementById('math-editor'));});$('#notice .dismiss').click(function(){options.onClose();});if(getSavedContent){$('#editor').html(editorContent1);}initiateEditor();if(!clipboard.isEmpty()){$('#editor-gateway').after("\n\t\t\t\t\t<span class=\'paste-element\'>&nbsp; &nbsp; &bull; &nbsp; &nbsp;</span>\n\t\t\t\t\t<span class=\'paste-element\' role=\'link\' onclick=\'clipboard.paste(this)\' target=\'editor\'>Paste</span>\n\t\t\t\t");}mainResolve();resolve();});});}function keypress(key_combinations,callback){var map={};onkeydown=onkeyup=function onkeyup(e){map[e.key]=e.type=='keydown';if(key_combinations.length===2){if(map[key_combinations[0]]&&map[key_combinations[1]]){e.preventDefault();callback();map={};}}else if(key_combinations.length===3){if(map[key_combinations[0]]&&map[key_combinations[1]]&&map[key_combinations[2]]){e.preventDefault();callback();map={};}}};}function animateTo(elem,param,param1,param2){var speed=param=== void 0?null:param,navbarCovered=param1=== void 0?false:param1,displacement=param2=== void 0?null:param2;if(speed===null)speed=300;if(!displacement){if(navbarCovered){displacement=($('#navbar').height()||0)+20;}else{displacement=0;}}$('html,body').animate({scrollTop:$(elem).offset().top-displacement},speed);}function pp(h){if(h==='show'){$('#pp').css({position:'fixed',margin:0,backgroundColor:'unset',top:navbarHeight+'px',display:'block'});}if(h==='hide'){$('#pp').css({display:'none'});}}function toast(message,param){var _options=param=== void 0?{}:param;var options;options=setDefaults({timer:3000,icon:'success'},_options);var Toast=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:options.timer,timerProgressBar:true,onOpen:function(_toast){_toast.addEventListener('mouseenter',Swal.stopTimer);_toast.addEventListener('mouseleave',Swal.resumeTimer);}});Toast.fire({icon:options.icon,title:message});}function brackets_replace(string,properties,param){var brackets=param=== void 0?2:param;if(!string){return '';}else{for(var property in properties){var value=properties[property];var b="{".repeat(brackets);var eb="}".repeat(brackets);string=string.replace("".concat(b).concat(property).concat(eb),value);}return string;}}function html_var(var_name){return $("[var=\"".concat(var_name,"\"]")).html();}function nl2br(content,is_xhtml){if(typeof content==='undefined'||content===null){return '';}var breakTag=is_xhtml||typeof is_xhtml==='undefined'?'<br />':'<br>';return (content+'').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g,'$1'+breakTag+'$2');}function initIframeExtras(){$('.ql-off-editor iframe').wrap("<div class='iframe-wrapper'></div>").before("<span role=\'link\' class=\'reload-iframe\'>Reload</span>");}function jsonResponse(response){var json_response;try{json_response=JSON.parse(response);}catch(e) {Swal.fire({html:response,title:"System error"});json_response={error:e,panic:e};}return json_response;}function userBy(context,value){return new Promise(function(resolve){$.ajax({url:"".concat(ajax,"/user-by.php"),data:{context:context,value:value},success:function(d){resolve(jsonResponse(d));}});});}function userByUsername(username){return userBy("username",username);}function userByStaffID(staff_id){return userBy("staff_id",staff_id);}function makeAttendance(uid){return new Promise(function(resolve){$.ajax({url:"".concat(ajax,"/make-attendance.php"),method:"post",data:{uid:uid},success:function(d){resolve(jsonResponse(d));}});});}function respondLeaveRequest(leave_id,response){return new Promise(function(resolve){$.ajax({url:"".concat(ajax,"/leave-request-action.php"),method:"post",data:{action:response,uid:user.uid,leave_id:leave_id},success:function(d){resolve(d);}});});}function htmlSelected(selected,attributes,contentObject,param){var has_placeholder=param=== void 0?false:param;if(has_placeholder){contentObject=Object.assign({"":"-Select-"},contentObject);}var select="<select ".concat(attributes,">");Object.keys(contentObject).forEach(function(k){var v=contentObject[k];var f;if(k===selected){f="selected";}else{f='';}select+="<option value=\'".concat(k,"\' ").concat(f,">").concat(v,"</option>");});select+='</select>';return select;}function arrayCombine(array1,array2){var n=0;var y={};array1.forEach(function(l){y[array1[n]]=array2[n];n++;});return y;}function arrayMultiply(array){return arrayCombine(array,array);}function arrayMerge(array1,array2){var array=array1;for(var key in array2){var value=array2[key];array[key]=value;}return array;}function numberFormat(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');}function numberFormatByElement(element){if(!element)element=this;var $this=$(element);$this.val(numberFormat($this.val().toString().replace(/,/g,'')));}function numberFormatSum(element){if(!element)element=this;var $this=$(element);var $this_container=$this.parents(".number-format-container");$this.val(numberFormat($this.val().toString().replace(/,/g,'')));var total=0;$this_container.find(".number-format").toArray().forEach(function(element1){var _total=parseInt($(element1).val().toString().replace(/,/g,''));if(!isNaN(_total)){total+=_total;}});$this_container.find(".number-format-sum").html(numberFormat(total.toString()));}function round(digits,param){var precision=param=== void 0?0:param;return parseFloat(digits.toFixed(precision));}function validateEmail(email){var re=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}var showResultsRequest=null;function searchDB(element,useResult){var $this=$(element);var inputDropHeight=60;var rai;var v=-1;if($this.parents(".search-input-container").length===0){$this.wrap("<div class='search-input-container'></div>");$this.focus();}if($this.siblings(".search-results").length===0){$('.search-input').after("<div class=\'search-results\'></div>");}$(".search-results").html("\n\t\t<div class=\'centralize\' style=\'height: 80px;\'>\n\t\t\t".concat(_flashRoller,"\n\t\t</div>\n\t"));var table=$this.attr("table");var field=$this.attr("field");var indexFields=$this.attr("index-fields").split(",");if(showResultsRequest!=null)showResultsRequest.abort();showResultsRequest=$.ajax({url:"".concat(ajax,"/search-db.php"),method:"post",data:{table:table,field:field,index_fields:indexFields,query:$this.val()},success:function(d){showResultsRequest=null;v=-1;$(".search-results").html(d);var $search_results=$this.siblings('.search-results');var $search_result=$search_results.find('.search-result');if(typeof $('.search-result')[0]!='undefined'){$search_results.find('.search-result .mark-out').toArray().forEach(function(s){var rx=new RegExp(_.escapeRegExp($this.val().toString()).trim(),'gi');var bd=$(s).text().trim().replace(rx,function(a){return "<span style=\'color: green;\'>".concat(a,"</span>");});$(s).html(bd);});}$search_result.on("click",function(){var result=JSON.parse($(this).find('.var-container').html());useResult($this.element(),result);$search_results.html("");});$this.on("keydown",function(e){var num=$search_results.element().scrollHeight/inputDropHeight;var bb=-1;$search_result.toArray().forEach(function(r){if($(r).hasClass("result-active")){bb=$search_result.index(r);}});var gb=bb*inputDropHeight-$search_results.scrollTop();var colmon=$search_results.height()/inputDropHeight;if(e.key==='ArrowDown'||e.key==='ArrowUp'){}if(e.key==='ArrowDown'){e.preventDefault();v++;if(v===0){$('.search-result').eq(0).addClass('result-active');}else{if(typeof rai==='undefined'||rai<num-1){$('.search-result.result-active').removeClass('result-active').next().addClass('result-active');}rai=$('.search-result').index($('.result-active'));gb=bb*inputDropHeight-$search_results.scrollTop();if(rai>colmon-1&&rai<num&&(gb>=inputDropHeight*(colmon-1)&&gb<inputDropHeight*colmon)){$search_results.scrollTop($search_results.scrollTop()+inputDropHeight);}}}else if(e.key==='ArrowUp'){e.preventDefault();if(rai>0){$('.search-result.result-active').removeClass('result-active').prev().addClass('result-active');}rai=$('.search-result').index($('.result-active'));gb=bb*inputDropHeight-$search_results.scrollTop();if(rai<num-colmon&&(gb>=0&&gb<inputDropHeight)){$search_results.scrollTop($search_results.scrollTop()-inputDropHeight);}}else if(e.key==='Enter'){console.log("Hamdan: Entered");}else if(e.key==='Control'){$(".search-input").blur();}var scrolled=$search_results.scrollTop();});$search_results.on('scroll',function(e){if(!$(".search-input").is(':focus')){$(".search-input").focus();}});}});}
</script>